function save(a,b,c){"add"==b.action?a.save({method:"save"},b,function(a){1==a.$resolved&&(window.location="#/"+b.page+"s")}):"update"==b.action&&a.update({method:"save",id:c},b,function(a){1==a.$resolved&&(window.location="#/"+b.page+"s")})}app.controller("custController",function(a,b){b.query({method:"getCustomers"},function(b){a.customers=b}),a.custClick=function(a){window.location="#/profile/"+a}}),app.controller("orderController",function(a,b){b.query({method:"getOrders"},function(b){a.orders=b})}),app.controller("orderChildController",function(a){if(a.order&&a.order.orders){for(var b=0,c=0;c<a.order.orders.length;c++)a.order.orders[c].total=a.order.orders[c].quantity*a.order.orders[c].price,b+=a.order.orders[c].total;a.total=b}}),app.controller("productController",function(a,b){b.query({method:"getProducts"},function(b){a.products=b})}),app.controller("profileController",function(a,b,c){c.get({method:"getOrders",id:b.id},function(b){a.profile=b;for(var c=0,d=0;d<a.profile.orders.length;d++)a.profile.orders[d].total=a.profile.orders[d].quantity*a.profile.orders[d].price,c+=a.profile.orders[d].total;a.total=c})}),app.controller("actionController",function(a,b,c,d){var e=["add","update","delete"],f=b.page;f=f.substr(0,1).toUpperCase()+f.substr(1);var g=b.action;if(g=g.substr(0,1).toUpperCase()+g.substr(1),a.is_disabled="delete"==b.action?!0:!1,a.page=f,a.action=g,-1==e.indexOf(b.action)&&c.path("/customers"),a.templateUrl=function(){return"partials/action/"+b.page+".php"},a.cancel=function(){c.path("/customers")},a["delete"]=function(){var a=b.id;d["delete"]({method:"delete",id:a,param:b.page},function(a){1==a.$resolved&&c.path("/"+b.page+"s")})},"add"!=b.action&&b.id){var h="get"+b.page+"s";d.get({method:h,id:b.id},function(c){"customer"==b.page?(a.first_name=c.first_name,a.last_name=c.last_name,a.email=c.email,a.contact_no=c.contact_no,a.address=c.address):"product"==b.page&&(a.product=c.product,a.price=c.price)})}}),app.controller("actionCustController",function(a,b,c){var d={};d.action=b.action,d.page=b.page,a.save=function(){d.first_name=a.first_name,d.last_name=a.last_name,d.address=a.address,d.email=a.email,d.contact_no=a.contact_no;var e=$("form").simpleForm();e&&save(c,d,b.id)}}),app.controller("actionOrderController",function(a,b,c,d){c.query({method:"getCustomers"},function(b){a.customers=b}),c.query({method:"getProducts"},function(b){a.products=b}),a.save=function(){var d=$("form").simpleForm(),e={};e.cust_id=a.cust_id.id,e.product_id=a.product_id.id,e.quantity=a.quantity,e.action=b.action,e.page=b.page;a.orderForm.$valid;d&&save(c,e,b.id)},window.scope=a}),app.controller("actionProductController",function(a,b,c){a.save=function(){var d=$("form").simpleForm(),e={};e.product=a.product,e.price=a.price,e.action=b.action,e.page=b.page;a.productForm.$valid;d&&save(c,e,b.id)}}),app.controller("navController",function(a,b){a.getClass=function(a){a.substr(0,1);if(-1==a.indexOf(","))return b.path().substr(0,a.length)==a?!0:!1;for(var c=a.split(","),d=0;d<=c.length-1;d++)if(c[d]==b.path().substr(0,a.length))return!0}});