var init_time=5,aAnswer=[],aData=[];$(function(){function a(){$("#num_quiz option:eq(0)").attr("selected",!0),$("#num_quiz, #quiz_btn").attr("disabled",!1),$("#quiz_again").hide(),$("#seq").text("")}function b(){var a=(parseInt($("#timer").text()),$(".submit_btn:visible")),b=a.parents(".row"),e=b.find(".answer_picked"),g=0==e.length?0:e.data("id"),h=b.find("#question").text();h=h.toLowerCase();var i={id:g,question:h},j=b.next().data("index"),k="undefined"==typeof j?f:j;if($("#seq").text(k+" of "+f),aAnswer.push(i),"undefined"==typeof j){var l=0;if($.each(aData,function(a,b){b.id==aAnswer[a].id&&(l+=1)}),l==f)message="Perfect score",is_perfect="hide";else{var m=100*l/f;message="Your total score is "+l+" out of "+f+"  ("+m+"%)",is_perfect=""}var n='<div class="row">					<div class="col-md-8 well">						<center><h4>'+message+'</h4></center>						<center class="'+is_perfect+'"><a class="btn review_exam">Do you want to review your scores?</a></center>					</div>					<div id="review_exam_container" style="display:none;"></div>				</div>';$("#quiz_container").html(n),$("#seq").text("Result"),$("#quiz_form").hide(),$("#quiz_again").show(),$("#label_select_pic").addClass("hide_me"),d()}b.next().slideDown(),b.remove(),starTimer=c(init_time)}function c(a){g=setTimeout(function(){$("#timer").text(a--),c(a),0>a?(d(),b()):10>a&&a>1?$("#timer").hasClass("green")&&$("#timer").removeClass("green").addClass("red"):a>10&&$("#timer").hasClass("red")&&$("#timer").removeClass("red").addClass("green"),$(".review_exam").length>0&&d()},1e3)}function d(){clearTimeout(g)}var e=quiz.base_url(),f=0,g="";a(),$(".btn_hover").live("click",function(){$(this).parents("#option_container").find(".btn_hover").removeClass("answer_picked").end().end().addClass("answer_picked")}),$("#quiz_btn").click(function(){f=parseInt($("#num_quiz").val()),$("#label_select_pic").removeClass("hide_me"),f>0&&(aData=quiz.get_quiz(f),quiz.render_quiz(aData),$("#seq").text("1 of "+f),g=c(init_time),aAnswer=[],$(this).attr("disabled",!0),$("#num_quiz").attr("disabled",!0))}),$(".submit_btn").live("click",function(){var a=$(this),c=a.parents(".row"),e=c.find(".answer_picked");return 0==e.length?($("#modal_msg").modal("show"),!1):(d(),void b())}),$("#quiz_again").click(function(){var b='<div class="row">						<div class="col-md-8 well">							<center><h4>Please select number of quiz to begin.</h4></center>						</div>					</div>';$("#quiz_container").html(b),a(),$("#quiz_form").show()}),$(".review_exam").live("click",function(){var a='<div class="col-md-12 form-group"><span class=" right_answer box img-rounded">Correct</span>&nbsp;&nbsp;<span class="wrong_answer box img-rounded">Wrong</span>&nbsp;&nbsp;<span class="no_answer box img-rounded">No Answer</span></div>';$.each(aData,function(b,c){var d=c.choices,f=c.animal;f=f.toUpperCase(),a+='<h5 class="col-md-12" style="padding-buttom:2px">'+(b+1)+".) "+f+"</h5>",a+='<div class="col-md-12 img-rounded default_background" style="padding:5px 0 10px 0">',$.each(d,function(d,f){var g=f.id==c.id?"glyphicon glyphicon-ok":"glyphicon glyphicon-remove",h="";aAnswer[b].id==f.id?h=aAnswer[b].id==c.id?"right_answer":0==aAnswer[b].id?"no_answer":"wrong_answer":0==aAnswer[b].id&&(h="no_answer"),a+='<div class="col-md-3" >							<center><div class="col-md-12"><i class="'+g+'"></i></div>						<div class="col-md-12"><img width="100" src="'+e+"assets/img/animals/"+f.id+'.jpg" class="img-rounded '+h+'"/></div></center>						</div>'}),a+="</div>"}),$("#review_exam_container").addClass("col-md-8 well").html(a),$("#review_exam_container").slideDown(),$(this).hide()})});var quiz={base_url:function(){return $("#base_url").val()},get_quiz:function(a){var b=quiz.base_url(),c="";return $.ajax({url:b+"animalquiz/up_to/"+a,dataType:"json",async:!1,success:function(a){c=a}}),c},render_quiz:function(a){var b="",c=quiz.base_url();$.each(a,function(a,d){var e=d.choices,f=(d.id,d.animal),g=a>0?'style="display:none;"':"";b+='<div class="row" '+g+' data-index="'+(a+1)+'">				<div class="col-md-8 well">					<div class="col-md-6"><h4 id="question">'+f.toUpperCase()+'</h4></div>					<div class="col-md-6"><h4 class="pull-right" ><span class="green" id="timer">'+init_time+'</span></h4></div>					<span id="option_container">					<div class="col-md-3 well btn btn_hover" data-id="'+e[0].id+'"><img src="'+c+"assets/img/animals/"+e[0].id+'.jpg" class="img-rounded"/></div>					<div class="col-md-3 well btn btn_hover" data-id="'+e[1].id+'"><img src="'+c+"assets/img/animals/"+e[1].id+'.jpg" class="img-rounded"/></div>					<div class="col-md-3 well btn btn_hover" data-id="'+e[2].id+'"><img src="'+c+"assets/img/animals/"+e[2].id+'.jpg" class="img-rounded"/></div>					<div class="col-md-3 well btn btn_hover" data-id="'+e[3].id+'"><img src="'+c+"assets/img/animals/"+e[3].id+'.jpg" class="img-rounded"/></div>					</span>					<div class="col-md-offset-3 col-md-6">						<form class="form-inline" role="form">						<center><div class="form-group"><button class="btn btn-primary submit_btn" type="button">Submit</button></div></center>						</form>					</div>				</div>			</div>'}),$("#quiz_container").html(b)}};